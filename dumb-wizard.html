<script>

function validate(divID){
	  if (divID === null) return false;
	  var size = $('.screen:visible input[type=radio]:checked').length;
	  if(size < 4) return false;
	  return true;
}

function moveToScreen(screenID) {
	$('#message').hide();
	if(!validate('.screen:visible')) return showMessage();
	$('.screen:visible').hide();
	$("#"+screenID).show();
}

function showMessage() {
	$('#message').show();
	return false;
}

function submitWizard() {
	$('#message').hide();
	if(!validate('.screen:visible')) return showMessage();
	$('.screen:visible').hide();
	$("#results").show();
	var values = redirectUser($( "form.wizard" ).serializeArray(),['answer1','answer2','answer3','answer4'],'answer',function(verify){
		
		verify([[c,d],[3,6,11,13],null,'Sensitive Skin']);	
		verify([[b,c,d],[2,5,8,10],{'q':[1],'v':'a'},{'link':'http://www.yahoo.com/'}]);
		
		/*****************************************************************************************
		vq([@array of solutions],[@array of questions to test],{@object: validator} || null , @String_Skin || {@object: to redirect});
		verify([[c,d],[3,6,11,13],null,'Sensitive Skin']);
		verify([[b,c,d],[2,5,8,10],{'q':[1],'v':[a]},{'link':'http://www.yahoo.com/'}]);
		*****************************************************************************************/
		
		
	}).getValues();
}



function redirectUser(answers,options,quetion_prefix,fn) {
	
	var a = options[0],
		b = options[1],
		c = options[2],
		d = options[3];

	var text = [];
	

	function vq(selections,questions,validator,response){

		if(response !== null && typeof response === 'object'){
			response = function(response){
							window.location.href = response.link;
						};
		}

		if(validator){
			if(validator.v.indexOf(answers[quetion_prefix+validator.q]) == -1) return response;
		}

		for(var i = 0; questions.length > i ; i=i+1){ 
			if(selections.indexOf(answers[quetion_prefix+questions[1]]) != -1 ){
				return ;
			}
		}
		
		return false;

	}

  	var vf = function verify(a) {
	  	
		  	if(a.length < 4) return false;
	
		  	var result = vq(a[0],a[1],a[2],a[3]);
	
		  	if(!result) return false;
	
	  		if(typeof(result) === 'function'){
	  			result();
	  		}else{
	  			text.push(result);
	  			return result;	
	  		} 
  	}
  	
  	function getValues(){
	  	return text;
  	}
	
	callback(vf);

}

	/*	
	# Heard in the train,
	Well, God is in His heaven
	And we all want whatâ€™s his
	But power and greed and corruptible seed
	Seem to be all that there is 
	*/

</script>

<style>
 #message{
	 display: none;
	 /* Animation -to hide outmatically css7- */
 }
</style>
<div class="wizard">
	<div id="message">
		Inputs missing, please fill the form.
	</div>
	<form action="/somewhereCool.go" method="post">

		<div class="screen" id="screen1">
			<section>
				<header>
					Look closely at the pores on the apple of your cheeks, around your nose, and your chin. Are they larger than the ones on the sides of your cheeks?
				</header>
				<dialog>
					<label for="answer1">No</label><input name="answer1" id="answer1" type="radio" value="answer1">
					<label for="answer2">A few</label><input name="answer1" id="answer2" type="radio" value="answer2">
					<label for="answer3">Somewhat</label><input name="answer1" id="answer3" type="radio" value="answer3">
					<label for="answer4">Yes</label><input name="answer1" id="answer4" type="radio" value="answer4">
				</dialog>
			</section>
			<section>
				<header>
					When you cleanse or apply moisturizers around your eyes, does the skin become red and/or irritated?
				</header>
				<dialog>
					<label for="answer21">No</label><input name="answer2" id="answer21" type="radio" value="answer1">
					<label for="answer22">Infrequently</label><input name="answer2" id="answer22" type="radio" value="answer2">
					<label for="answer23">Occasionaly</label><input name="answer2" id="answer23" type="radio" value="answer3">
					<label for="answer24">Yes</label><input name="answer2" id="answer24" type="radio" value="answer4">
				</dialog>
			</section>
			<section>
				<header>
					Without applying any moisturizers after washing your face with commerical soaps, do your cheeks and forehead become tight and dry a within a couple of hours?
				</header>
				<dialog>
					<label for="answer31">Never</label><input name="answer3" id="answer31" type="radio" value="answer1">
					<label for="answer32">Rarely</label><input name="answer3" id="answer32" type="radio" value="answer2">
					<label for="answer33">Sometimes</label><input name="answer3" id="answer33" type="radio" value="answer3">
					<label for="answer34">Always</label><input name="answer3" id="answer34" type="radio" value="answer4">
				</dialog>
			</section>

			<section>
				<header>
					After a couple of hours of application, does your makeup tend to smear and have a high shine ?
				</header>
				<dialog>
					<label for="answer31">No</label><input name="answer4" id="answer41" type="radio" value="answer1">
					<label for="answer32">A little around my nose</label><input name="answer4" id="answer42" type="radio" value="answer2">
					<label for="answer33">Mostly around my cheeks</label><input name="answer4" id="answer43" type="radio" value="answer3">
					<label for="answer34">All over</label><input name="answer4" id="answer44" type="radio" value="answer4">
				</dialog>
			</section>

			<footer>
				<input name="next" type="button" value="Next" onclick="moveToScreen('screen2')">
			</footer>
		</div>

		<div class="screen" id="screen2">
			<section>
				<header>
					Do you have or suspect that you have eczema or psoriasis lesions?
				</header>
				<dialog>
					<label for="answer51">No</label><input name="answer5" id="answer51" type="radio" value="answer1">
					<label for="answer52">Some itchy patches</label><input name="answer5" id="answer52" type="radio" value="answer2">
					<label for="answer53">Forehead some areasof outbreak</label><input name="answer5" id="answer53" type="radio" value="answer3">
					<label for="answer54">Yes and they never diminish.</label><input name="answer5" id="answer54" type="radio" value="answer4">
				</dialog>
			</section>
			<section>
				<header>
					Check the skin on your body a couple hours after bathing , but, before applying any moisturizer. Is your skin dry and flaky?
				</header>
				<dialog>
					<label for="answer61">No</label><input name="answer6" id="answer61" type="radio" value="answer1">
					<label for="answer62">Sometimes</label><input name="answer6" id="answer62" type="radio" value="answer2">
					<label for="answer63">Occasionally</label><input name="answer6" id="answer63" type="radio" value="answer3">
					<label for="answer64">All the time</label><input name="answer6" id="answer64" type="radio" value="answer4">
				</dialog>
			</section>
			<section>
				<header>
					Are you reluctant to apply any moisturizers to your face after cleansing for fear of pimpling or ance outbreaks?
				</header>
				<dialog>
					<label for="answer71">No, my skin always need a moisturizer</label><input name="answer7" id="answer71" type="radio" value="answer1">
					<label for="answer72">I rarely pimple</label><input name="answer7" id="answer72" type="radio" value="answer2">
					<label for="answer73">I occasionally get pimples</label><input name="answer7" id="answer73" type="radio" value="answer3">
					<label for="answer74">Yes, any little thing seems to set them off</label><input name="answer7" id="answer74" type="radio" value="answer4">
				</dialog>
			</section>
			<section>
				<header>
					How many times a day do you feel the need to apply lotion to your arms and/or legs? 
				</header>
				<dialog>
					<label for="answer81">none, I rarely need to lotion</label><input name="answer8" id="answer81" type="radio" value="answer1">
					<label for="answer82">Once</label><input name="answer8" id="answer82" type="radio" value="answer2">
					<label for="answer83">Two times</label><input name="answer8" id="answer83" type="radio" value="answer3">
					<label for="answer84">More often than two times a day</label><input name="answer8" id="answer84" type="radio" value="answer4">
				</dialog>
			</section>

			<footer>
				<input name="next" type="button" value="Finish" onclick="moveToScreen('screen3')">
			</footer>
		</div>


		<div class="screen" id="screen3">
			<section>
				<header>
					Do you struggle with whiteheads or blackheads on your forehead and/or around your nose?
				</header>
				<dialog>
					<label for="answer91">No</label><input name="answer9" id="answer91" type="radio" value="answer1">
					<label for="answer92">Occasionally</label><input name="answer9" id="answer92" type="radio" value="answer2">
					<label for="answer93">Frequently</label><input name="answer9" id="answer93" type="radio" value="answer3">
					<label for="answer94">It's a constant battle</label><input name="answer9" id="answer94" type="radio" value="answer4">
				</dialog>
			</section>
			<section>
				<header>
					When you shave sensitive areas such as your underarms or bikini line, do you suffer from itching and/or bumping?
				</header>
				<dialog>
					<label for="answer101">No</label><input name="answer10" id="answer101" type="radio" value="answer1">
					<label for="answer102">answer1</label><input name="answer10" id="answer102" type="radio" value="answer1">
					<label for="answer103">Answer3</label><input name="answer10" id="answer103" type="radio" value="answer3">
					<label for="answer104">Answer4</label><input name="answer10" id="answer104" type="radio" value="answer4">
				</dialog>
			</section>
			<section>
				<header>
					Are winter months particularly drying to your hands and feet, causing thick, scaly, flaky, dry, and sometimes painful skin?
				</header>
				<dialog>
					<label for="answer111">Not Really</label><input name="answer11" id="answer111" type="radio" value="answer1">
					<label for="answer112">Sometimes</label><input name="answer11" id="answer112" type="radio" value="answer2">
					<label for="answer113">Often</label><input name="answer11" id="answer113" type="radio" value="answer3">
					<label for="answer114">All Winter</label><input name="answer11" id="answer114" type="radio" value="answer4">
				</dialog>
			</section>
			<section>
				<header>
					Do you have dark circles around your eyes or bags under them?
				</header>
				<dialog>
					<label for="answer121">Never</label><input name="answer12" id="answer121" type="radio" value="answer1">
					<label for="answer122">Only when I'm stressed</label><input name="answer12" id="answer122" type="radio" value="answer2">
					<label for="answer123">Often</label><input name="answer12" id="answer123" type="radio" value="answer3">
					<label for="answer124">They never away!</label><input name="answer12" id="answer124" type="radio" value="answer4">
				</dialog>
			</section>

			<footer>
				<input name="next" type="button" value="Finish" onclick="submitWizard()">
			</footer>
		</div>
	</form>
</div>
